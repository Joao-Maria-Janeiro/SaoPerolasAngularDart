<!DOCTYPE html>
<html>
  <head>
    <title>São Pérolas</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script defer src="main.dart.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </head>
  <body>
    <my-app>Loading...</my-app>


    <footer> <center>
      <a style="color:gray;" href="https://www.instagram.com/sao.perolas/"><i style="font-size: 2em;" class="fab fa-instagram"></i></a>
      <a style="color:gray;" href="https://www.facebook.com/saoperolas"><i style="font-size: 2em;" class="fab fa-facebook-square"></i></a>
      <a style="color:gray;" href="https://api.whatsapp.com/send?phone=351960003160"><i style="font-size: 2em;" class="fab fa-whatsapp"></i></a>
      <br>
      <br>
      <img width="150PX" src="graylogo.png">
      <br>
      <br>
      <b style="font-size:15px;" >SHOW ROOM.</b> RUA CORONEL PEREIRA DA SILVA, 2B
      <p style="font-size:15px;" >1300-147 LISBOA, PORTUGAL</p>
    </center>
      <p style="FONT-SIZE:10px; margin-left: 30px;" >DIREITOS DE AUTOR © 2019 SÃO PÉROLAS</p>
    </footer>


    <script>
      function openNav() {
        document.getElementById("mySidenav").style.opacity = "0.8";
        document.getElementById("mySidenav").style.width = "250px";
        document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
        document.getElementsByClassName("shade").style.opacity = "0.8"
      }

      function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
        document.body.style.backgroundColor = "white";
        document.getElementsByClassName("shade").style.opacity = "1"
      }

      function openNav2() {
        document.getElementById("mySidenav2").style.opacity = "0.8";
        document.getElementById("mySidenav2").style.width = "250px";
        document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
        document.getElementsByClassName("shade").style.opacity = "0.8"
      }

      function closeNav2() {
        document.getElementById("mySidenav2").style.width = "0";
        document.body.style.backgroundColor = "white";
        document.getElementsByClassName("shade").style.opacity = "1"
      }
    </script>


<script>

  // Set your publishable key: remember to change this to your live publishable key in production
  // See your keys here: https://dashboard.stripe.com/account/apikeys
  var stripe = Stripe('pk_test_IizUcwk599eQlrFih9o8aLrm00JgrtbwO1');
  var elements = stripe.elements();

  // Set up Stripe.js and Elements to use in checkout form
  var style = {
    base: {
      color: '#32325d',
      lineHeight: '18px',
      fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
      fontSmoothing: 'antialiased',
      fontSize: '16px',
      '::placeholder': {
        color: '#aab7c4'
      }
    },
    invalid: {
      color: '#fa755a',
      iconColor: '#fa755a'
    }
  };
  var card = elements.create("card", { style: style });

  function mountTheCard() {
    card.mount("#card-element");

    card.addEventListener('change', function(event) {
      var displayError = document.getElementById('card-errors');
      if (event.error) {
        displayError.textContent = event.error.message;
      } else {
        displayError.textContent = '';
      }
    });

    var form = document.getElementById('payment-form');
    var clientSecret = window.localStorage['sao_perolas_order_token']
    form.addEventListener('submit', function(ev) {
      ev.preventDefault();
      document.getElementById('submit').disabled = true;
      stripe.confirmCardPayment(clientSecret, {
        payment_method: {
          card: card,
        }
      }).then(function(result) {
        if (result.error) {
          // Show error to your customer (e.g., insufficient funds)
          document.getElementById('payment-form').insertAdjacentHTML('afterend', '<p class=" label label-danger" style="color:red" >'+ 'Ocorreu um erro com o seu pagamento, por favor tente novamente. Recomendamos que recarregue a página ou retroceda para a página anterior e tente novamente.' + '</p>');
        } else {
          // The payment has been processed!
          if (result.paymentIntent.status === 'succeeded') {
            console.log('Successful');
            document.getElementById('payment-form').outerHTML = ""; 
            document.getElementById('container').innerHTML = '<br><br><br><div class="text-center"><img style="width:90px" src = "https://i.ibb.co/dcqx1fh/check-mark-1.png"></img><br><br><p>A sua compra foi efetuada com sucesso</p><p>Irá receber um comprovativo por email</p></div><br><br>';
            // Show a success message to your customer
            // There's a risk of the customer closing the window before callback
            // execution. Set up a webhook or plugin to listen for the
            // payment_intent.succeeded event that handles any business critical
            // post-payment actions.
          }
        }
      });
    });
  }

  </script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.7.2/js/all.js" integrity="sha384-0pzryjIRos8mFBWMzSSZApWtPl/5++eIfzYmTgBBmXYdhvxPc+XcFEk+zJwDgWbP" crossorigin="anonymous"></script>
  </body>
</html>
